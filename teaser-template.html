<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Talent à Impact — Amarillo Search</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  /* ============================================================
     RESET & BASE
     ============================================================ */
  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

  /* ============================================================
     CSS VARIABLES — Spec Canva
     ============================================================ */
  :root {
    --amarillo-yellow: #F5B731;
    --amarillo-yellow-light: #FFF3D0;
    --amarillo-dark: #2D3436;
    --amarillo-text: #1A1A1A;
    --amarillo-text-secondary: #555555;
    --amarillo-text-muted: #888888;
    --amarillo-border: #E0E0E0;
    --amarillo-white: #FFFFFF;
    --amarillo-confidential: #999999;
    --amarillo-body-text: #333333;

    --font-serif: 'DM Serif Display', 'Playfair Display', Georgia, 'Times New Roman', serif;
    --font-sans: 'Inter', 'Open Sans', -apple-system, BlinkMacSystemFont, sans-serif;
  }

  /* ============================================================
     PAGE — A4 format
     ============================================================ */
  html, body {
    width: 210mm;
    min-height: 297mm;
    font-family: var(--font-sans);
    color: var(--amarillo-text);
    background: #f0f0f0;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  .page {
    width: 210mm;
    min-height: 297mm;
    max-height: 297mm;
    overflow: hidden;
    background: var(--amarillo-white);
    margin: 0 auto;
    box-shadow: 0 2px 20px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
    position: relative;
  }

  /* ============================================================
     HEADER — Spec §4.1
     ============================================================ */
  .header {
    background: var(--amarillo-dark);
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 28px 40px;
    min-height: 155px;
    flex-shrink: 0;
  }

  .header-logo img {
    width: 170px;
    height: auto;
    display: block;
  }

  .header-title {
    font-family: var(--font-serif);
    font-size: 36px;
    font-weight: 400; /* DM Serif Display is already bold-looking */
    color: var(--amarillo-white);
    text-align: right;
    line-height: 1.1;
    letter-spacing: 1px;
  }

  .header-yellow-line {
    height: 4px;
    background: var(--amarillo-yellow);
    flex-shrink: 0;
  }

  /* ============================================================
     BODY CONTENT
     ============================================================ */
  .body-content {
    flex: 1;
    padding: 0 40px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  /* ============================================================
     TITRE DU POSTE — Spec §4.2
     ============================================================ */
  .titre-poste {
    font-family: var(--font-serif);
    font-size: 20px;
    font-weight: 400;
    color: var(--amarillo-text);
    text-align: center;
    padding: 15px 20px 10px 20px;
    flex-shrink: 0;
  }

  /* ============================================================
     BARRE MÉTADONNÉES — Spec §4.3
     ============================================================ */
  .metadata-bar {
    display: flex;
    align-items: stretch;
    min-height: 55px;
    padding: 8px 0;
    flex-shrink: 0;
    border-top: 1px solid var(--amarillo-border);
    border-bottom: 1px solid var(--amarillo-border);
  }

  .metadata-col {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
    text-align: left;
    padding: 4px 15px;
  }

  .metadata-col:not(:last-child) {
    border-right: 1px solid #CCCCCC;
  }

  .metadata-label {
    font-size: 11px;
    font-weight: 400;
    color: var(--amarillo-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 4px;
  }

  .metadata-value {
    font-size: 14px;
    font-weight: 700;
    color: var(--amarillo-text);
  }

  .metadata-sub {
    font-size: 12px;
    font-weight: 400;
    color: var(--amarillo-text-secondary);
    margin-top: 2px;
  }

  /* ============================================================
     SECTION 2 COLONNES — Spec §4.4
     ============================================================ */
  .two-columns {
    display: flex;
    gap: 15px;
    margin-top: 14px;
    flex-shrink: 0;
  }

  /* Impact — 60% */
  .impact-box {
    flex: 6;
    background: var(--amarillo-yellow-light);
    border-left: 5px solid var(--amarillo-yellow);
    border-radius: 10px;
    padding: 14px 16px;
  }

  .impact-box .section-title {
    font-size: 14px;
    font-weight: 700;
    color: var(--amarillo-text);
    margin-bottom: 8px;
  }

  .impact-box ul {
    list-style: disc;
    padding-left: 18px;
    margin: 0;
  }

  .impact-box li {
    font-size: 12.5px;
    font-weight: 400;
    color: var(--amarillo-body-text);
    line-height: 1.4;
    margin-bottom: 3px;
  }

  /* Conditions — 40% */
  .conditions-box {
    flex: 4;
    background: var(--amarillo-white);
    border: 1px solid var(--amarillo-border);
    border-radius: 10px;
    padding: 14px 16px;
  }

  .conditions-box .section-title {
    font-size: 14px;
    font-weight: 700;
    color: var(--amarillo-text);
    text-align: center;
    margin-bottom: 8px;
  }

  .conditions-separator {
    width: 60%;
    height: 2px;
    background: var(--amarillo-yellow);
    margin: 0 auto 10px auto;
  }

  .conditions-box ul {
    list-style: disc;
    padding-left: 18px;
    margin: 0;
  }

  .conditions-box li {
    font-size: 12.5px;
    font-weight: 400;
    color: var(--amarillo-body-text);
    line-height: 1.4;
    margin-bottom: 3px;
  }

  .conditions-box li strong {
    font-weight: 700;
  }

  /* ============================================================
     LECTURE STRATÉGIQUE — Spec §4.5
     ============================================================ */
  .lecture-box {
    background: var(--amarillo-yellow-light);
    border-left: 5px solid var(--amarillo-yellow);
    border-radius: 10px;
    padding: 14px 16px;
    margin-top: 14px;
    flex-shrink: 0;
  }

  .lecture-box .section-title {
    font-size: 15px;
    font-weight: 700;
    color: var(--amarillo-text);
    margin-bottom: 8px;
  }

  .lecture-box .section-title .amarillo-accent {
    color: var(--amarillo-yellow);
  }

  .lecture-box ul {
    list-style: disc;
    padding-left: 18px;
    margin: 0;
  }

  .lecture-box li {
    font-size: 12.5px;
    font-weight: 400;
    color: var(--amarillo-body-text);
    line-height: 1.4;
    margin-bottom: 3px;
  }

  /* ============================================================
     MENTION CONFIDENTIELLE — Spec §4.6
     ============================================================ */
  .confidential {
    font-size: 10.5px;
    font-style: italic;
    color: var(--amarillo-confidential);
    text-align: center;
    padding: 12px 20px;
    flex-shrink: 0;
    margin-top: auto;
  }

  /* ============================================================
     FOOTER — Spec §4.7
     ============================================================ */
  .footer-yellow-line {
    height: 4px;
    background: var(--amarillo-yellow);
    flex-shrink: 0;
  }

  .footer {
    background: var(--amarillo-dark);
    flex-shrink: 0;
    padding: 14px 30px 6px 30px;
  }

  .footer-main {
    display: flex;
    align-items: center;
    gap: 20px;
  }

  .footer-logo img {
    width: 110px;
    height: auto;
    display: block;
  }

  .footer-text {
    flex: 1;
  }

  .footer-description {
    font-size: 10.5px;
    font-weight: 400;
    color: var(--amarillo-white);
    line-height: 1.4;
    margin-bottom: 4px;
  }

  .footer-email {
    font-size: 11.5px;
    font-weight: 700;
    color: var(--amarillo-yellow);
  }

  .footer-baseline {
    font-size: 10.5px;
    font-weight: 400;
    color: var(--amarillo-yellow);
    text-align: center;
    padding-top: 6px;
    margin-top: 6px;
  }

  /* ============================================================
     WATERMARK (optionnel)
     ============================================================ */
  .watermark {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(-35deg);
    font-size: 80px;
    font-weight: 700;
    color: rgba(0,0,0,0.03);
    text-transform: uppercase;
    pointer-events: none;
    letter-spacing: 15px;
    white-space: nowrap;
    z-index: 10;
  }

  /* ============================================================
     PRINT STYLES — A4 exact
     ============================================================ */
  @media print {
    html, body {
      background: white;
      margin: 0;
      padding: 0;
    }

    .page {
      box-shadow: none;
      margin: 0;
      width: 210mm;
      height: 297mm;
      min-height: 297mm;
      max-height: 297mm;
      page-break-after: always;
    }

    .no-print {
      display: none !important;
    }
  }

  @page {
    size: A4 portrait;
    margin: 0;
  }

  /* ============================================================
     TOOLBAR (non imprimé)
     ============================================================ */
  .toolbar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: var(--amarillo-dark);
    color: white;
    padding: 10px 20px;
    display: flex;
    gap: 12px;
    align-items: center;
    z-index: 100;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  }

  .toolbar button {
    padding: 8px 18px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    font-family: var(--font-sans);
  }

  .toolbar .btn-print {
    background: var(--amarillo-yellow);
    color: var(--amarillo-dark);
  }

  .toolbar .btn-close {
    background: transparent;
    color: white;
    border: 1px solid rgba(255,255,255,0.3);
  }

  .toolbar .title {
    font-size: 14px;
    font-weight: 600;
    flex: 1;
  }

  body.has-toolbar .page {
    margin-top: 60px;
  }
</style>
</head>
<body class="has-toolbar">

<!-- ── TOOLBAR (non imprimé) ── -->
<div class="toolbar no-print">
  <span class="title">Talent à Impact — Prévisualisation</span>
  <button class="btn-print" onclick="window.print()">Imprimer / Enregistrer PDF</button>
  <button class="btn-close" onclick="window.close()">Fermer</button>
</div>

<!-- ── PAGE A4 ── -->
<div class="page" id="teaser-page">

  <!-- WATERMARK -->
  <div class="watermark">CONFIDENTIEL</div>

  <!-- HEADER -->
  <div class="header">
    <div class="header-logo">
      <img src="AS_white_transp.png" alt="Amarillo Search">
    </div>
    <div class="header-title">
      TALENT<br>IMPACT
    </div>
  </div>
  <div class="header-yellow-line"></div>

  <!-- BODY -->
  <div class="body-content">

    <!-- TITRE DU POSTE -->
    <div class="titre-poste" id="titre-poste">
      DSI industriel – Transformation &amp; structuration multi-sites
    </div>

    <!-- BARRE MÉTADONNÉES -->
    <div class="metadata-bar" id="metadata-bar">
      <!-- Colonnes injectées dynamiquement -->
    </div>

    <!-- 2 COLONNES : Impact + Conditions -->
    <div class="two-columns">
      <div class="impact-box">
        <div class="section-title">Impact stratégique &amp; opérationnel</div>
        <ul id="impact-list">
          <!-- Items injectés dynamiquement -->
        </ul>
      </div>

      <div class="conditions-box">
        <div class="section-title">Conditions &amp; Disponibilité</div>
        <div class="conditions-separator"></div>
        <ul id="conditions-list">
          <!-- Items injectés dynamiquement -->
        </ul>
      </div>
    </div>

    <!-- LECTURE STRATÉGIQUE -->
    <div class="lecture-box">
      <div class="section-title">Lecture stratégique <span class="amarillo-accent">Amarillo</span></div>
      <ul id="lecture-list">
        <!-- Items injectés dynamiquement -->
      </ul>
    </div>

    <!-- MENTION CONFIDENTIELLE -->
    <div class="confidential">
      Ce document est confidentiel. L'identité du candidat sera communiquée après accord mutuel pour poursuivre le processus.
    </div>

  </div><!-- /body-content -->

  <!-- FOOTER -->
  <div class="footer-yellow-line"></div>
  <div class="footer">
    <div class="footer-main">
      <div class="footer-logo">
        <img src="AS_white_transp.png" alt="Amarillo Search">
      </div>
      <div class="footer-text">
        <div class="footer-description">
          Cabinet de search et d'approche directe spécialisé dans le recrutement de profils middle et top management pour des rôles à enjeu stratégique.
        </div>
        <div class="footer-email">benjamin.fetu@amarillosearch.com</div>
      </div>
    </div>
    <div class="footer-baseline">Talent à Impact · Document confidentiel</div>
  </div>

</div><!-- /page -->

<!-- ============================================================
     INJECTION DES DONNÉES (via URL params ou window.opener)
     ============================================================ -->
<script>
(function() {
  'use strict';

  // Récupérer les données candidat : soit depuis window.teaserData (injecté par l'ouvreur),
  // soit depuis les paramètres URL en base64
  let data = null;

  if (window.teaserData) {
    data = window.teaserData;
  } else {
    try {
      const params = new URLSearchParams(window.location.search);
      const encoded = params.get('data');
      if (encoded) {
        data = JSON.parse(decodeURIComponent(atob(encoded)));
      }
    } catch (e) {
      console.warn('Erreur décodage données:', e);
    }
  }

  if (!data) {
    // Données de démonstration (mock-up)
    data = {
      titre_poste: "DSI industriel – Transformation & structuration multi-sites",
      metadonnees: [
        { label: "FONCTION", valeur: "DSI" },
        { label: "ZONE", valeur: "NANTES", sous_valeur: "Multi-sites – Groupe industriel" },
        { label: "ÉQUIPE", valeur: "25 pers." },
        { label: "BUDGET IT", valeur: "6 M€" },
      ],
      impact_items: [
        "Structuration DSI post-acquisition (3 sociétés intégrées)",
        "Refonte ERP groupe (SAP / Dynamics / autre)",
        "Réduction OPEX IT de 18 %",
        "Mise en place gouvernance & comité IT",
        "Pilotage cybersécurité ISO 27001",
        "Accompagnement croissance de 60M€ → 140M€"
      ],
      conditions: [
        { texte: "En poste actuellement" },
        { label: "Mobilité", texte: "Grand Ouest / Nationale" },
        { label: "Rémunération cible", texte: "120 - 135k€ fixe + variable" },
        { label: "Préavis", texte: "3 mois" }
      ],
      lecture_items: [
        "Capacité à structurer avant changement d'échelle",
        "Culture terrain + vision comité de direction",
        "Expérience d'environnements actionnariaux exigeants",
        "Leadership adapté aux organisations familiales ou groupes"
      ]
    };
  }

  // Helper : échappe le HTML
  function esc(str) {
    const div = document.createElement('div');
    div.textContent = str || '';
    return div.innerHTML;
  }

  // ── Titre du poste ──
  if (data.titre_poste) {
    document.getElementById('titre-poste').textContent = data.titre_poste;
  }

  // ── Barre métadonnées ──
  const metaBar = document.getElementById('metadata-bar');
  if (data.metadonnees && data.metadonnees.length > 0) {
    const filtered = data.metadonnees.filter(m => m.valeur);
    metaBar.innerHTML = filtered.map(m => `
      <div class="metadata-col">
        <div class="metadata-label">${esc(m.label)}</div>
        <div class="metadata-value">${esc(m.valeur)}</div>
        ${m.sous_valeur ? `<div class="metadata-sub">${esc(m.sous_valeur)}</div>` : ''}
      </div>
    `).join('');
  }

  // ── Impact items ──
  const impactList = document.getElementById('impact-list');
  if (data.impact_items && data.impact_items.length > 0) {
    impactList.innerHTML = data.impact_items
      .map(item => `<li>${esc(item)}</li>`).join('');
  }

  // ── Conditions ──
  const condList = document.getElementById('conditions-list');
  if (data.conditions && data.conditions.length > 0) {
    condList.innerHTML = data.conditions.map(c => {
      if (c.label) {
        return `<li><strong>${esc(c.label)}</strong> : ${esc(c.texte)}</li>`;
      }
      return `<li>${esc(c.texte)}</li>`;
    }).join('');
  }

  // ── Lecture items ──
  const lectureList = document.getElementById('lecture-list');
  if (data.lecture_items && data.lecture_items.length > 0) {
    lectureList.innerHTML = data.lecture_items
      .map(item => `<li>${esc(item)}</li>`).join('');
  }

})();
</script>

</body>
</html>
